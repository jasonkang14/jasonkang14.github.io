{"componentChunkName":"component---src-templates-post-template-post-template-tsx","path":"/posts/Miniter-Sending-Get-Post-Requests","result":{"data":{"markdownRemark":{"id":"ddcf446e-d259-5d7c-be0e-9e8ddb840525","html":"<p>There are two ways to <code class=\"language-text\">fetch</code> data from server:<code class=\"language-text\">get</code> and <code class=\"language-text\">post</code>.<br>\nThankfully the methods are very straight-forward. <code class=\"language-text\">get</code> is used in order to merely get data, and <code class=\"language-text\">post</code> is used to interact with the server by posting some data and retrieve it back.</p>\n<p><code class=\"language-text\">get</code> was used to display previously generated tweets on screen, and <code class=\"language-text\">post</code> was used to sign up, log in, and generate new tweets.</p>\n<p>#1. <code class=\"language-text\">Get</code> to display previously generated tweets\nHere is the code for the <code class=\"language-text\">get</code> method;</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">fetch ('http://localhost:8000/api/tweet', {mode: 'cors'})\n  .then (\n    (response) => {\n      response.json().then((data) => {\n        for (let i=data.length-1; i>=0; i--) {\n          const originalTweet = document.createElement('li');\n          originalTweet.innerHTML = makeTweetList(data[i]);\n          elTweetList.appendChild(originalTweet);\n        }\n      });\n    }\n  )</code></pre></div>\n<ol>\n<li><code class=\"language-text\">fetch</code> information from the url</li>\n<li><code class=\"language-text\">then</code> wait for a <code class=\"language-text\">response</code></li>\n<li><code class=\"language-text\">then</code> use the <code class=\"language-text\">data</code> from the <code class=\"language-text\">response</code> in order to do something.</li>\n</ol>\n<p>Here is the back-end part:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">class Tweet_class(View):\n    def get(self, request, *args, **kwargs):\n        tweet_list = list(Tweet.objects.values())\n        return JsonResponse(tweet_list, safe=False)</code></pre></div>\n<p>when the server gets a <code class=\"language-text\">get</code> request, it returns tweet_list, which is in the form of an array(or a list in python) to the front-end. Therefore, the fetched <code class=\"language-text\">data</code> looks like an array.</p>\n<p><img src=\"https://scontent-hkg3-1.xx.fbcdn.net/v/t1.0-9/65284788_10219135481398812_1402279772439969792_o.jpg?_nc_cat=101&#x26;_nc_oc=AQlnw2un3dSg9S6vSmjPY2OdcZkfxMePJvhGY1XZnJli6Cejciwe2DmA25wqszg89WQ&#x26;_nc_ht=scontent-hkg3-1.xx&#x26;oh=6bab252688ffa04c297e64b0b83a01b0&#x26;oe=5DC1DE49\" alt=\"fetched data\"></p>\n<p>The retrieved data ges paired up with previously written code to display previously generated tweets.</p>\n<p>#2. <code class=\"language-text\">Post</code> to interact with the server.\nHere is how I wrote a JavaScript code for sign-up.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">const signUp = () => {\n  fetch('http://localhost:8000/api/account', {\n    method: 'post',\n    headers: {\n      \"Content-type\": \"application/x-www-form-urlencoded; charset=UTF-8\"\n    },\n    body: JSON.stringify({\n      \"user\" : elNewId.value,\n      \"name\" : elNewName.value,\n      \"password\" : elNewPassword.value,\n      \"profile\" : elNewProfile.value\n    })\n  })\n\n  .then(\n    (response) => {\n      console.log(1);\n      response.json().then((data) => {\n        console.log(data);\n        alert(\"회원가입 성공\");\n      })\n  })\n\n  .catch(function (error) {\n    console.log('Request failed', error);\n  });\n}</code></pre></div>\n<p><code class=\"language-text\">signUp()</code> gets invoked when sign-up button is clicked. In order to sign up for Miniter,</p>\n<ol>\n<li><code class=\"language-text\">fetch</code> information from the url</li>\n<li><code class=\"language-text\">post</code> your data (userid, name, password, profile)</li>\n<li><code class=\"language-text\">then</code> wait for a <code class=\"language-text\">response</code></li>\n<li><code class=\"language-text\">then</code> use the <code class=\"language-text\">data</code> from the <code class=\"language-text\">response</code> in order to do something.</li>\n</ol>\n<p>When a <code class=\"language-text\">post</code> request is made from the front-end, the back-end receives data and stores it in the form of a list (or an array in JavaScript).</p>\n<p><img src=\"https://scontent-hkg3-1.xx.fbcdn.net/v/t1.0-9/64495197_10219135524159881_7340781733786157056_n.jpg?_nc_cat=100&#x26;_nc_oc=AQnFZmh8ODTkhgdufGuYGOThYTRTOXGMbso3gVjVDtF8cXxXrVkhf7s5vYRsiel7R88&#x26;_nc_ht=scontent-hkg3-1.xx&#x26;oh=1c2a093e2bb525bcbf3447d4c5dfa806&#x26;oe=5D8C99A4\" alt=\"sign up\"></p>","fields":{"slug":"/posts/2019//posts/Miniter-Sending-Get-Post-Requests","tagSlugs":["/tag/javascript/"]},"frontmatter":{"date":"2019-06-20T21:56:37.121Z","description":"Sending a post request to a locally created API to build log-in, sign-up, and making tweets.","tags":["JavaScript"],"title":"Miniter[07]Sending Get/Post Requests","socialImage":null}}},"pageContext":{"slug":"/posts/2019//posts/Miniter-Sending-Get-Post-Requests"}},"staticQueryHashes":["251939775","288581551","401334301"]}