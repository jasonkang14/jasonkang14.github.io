{"componentChunkName":"component---src-templates-post-template-post-template-tsx","path":"/react/functional-programming-with-react-part-four","result":{"data":{"markdownRemark":{"id":"db42baac-290c-5a49-b01b-ebce9b839f79","html":"<p>함수형 프로그래밍에 대해 공부하면서 <a href=\"https://jasonkang14.github.io/cs/functional-programming-pure-function\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Pure Function</a> 과 <a href=\"https://jasonkang14.github.io/cs/functional-programming-currying\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Currying</a>에 대해 학습했다. 이제 <code class=\"language-text\">currying</code>의 개념을 React의 이벤트핸들러에 적용시켜보고자 한다.</p>\n<p>단순하게 말하면 currying은 함수에 여러 인자를 동시에 넘겨주는게 아니라 sequence로 넘겨주는 것이다.\n이벤트 핸들러에 커링을 적용하면 코드가 조금 단순해질 수 있는데, 예제를 통해서 살펴보도록 하자.</p>\n<div class=\"gatsby-highlight\" data-language=\"typescript\"><pre class=\"language-typescript\"><code class=\"language-typescript\"><span class=\"token keyword\">function</span> <span class=\"token function\">ComponentA</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">handleClick</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>item<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">alert</span><span class=\"token punctuation\">(</span>item<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">handleClickWithEvent</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>\n    e<span class=\"token operator\">:</span> React<span class=\"token punctuation\">.</span>MouseEvent<span class=\"token operator\">&lt;</span>HTMLButtonElement<span class=\"token operator\">></span><span class=\"token punctuation\">,</span>\n    item<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span>\n  <span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">alert</span><span class=\"token punctuation\">(</span>item<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token operator\">&lt;</span><span class=\"token operator\">></span>\n      <span class=\"token operator\">&lt;</span>button onClick<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">(</span>e<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token function\">handleClickWithEvent</span><span class=\"token punctuation\">(</span>e<span class=\"token punctuation\">,</span> <span class=\"token string\">\"시작\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span><span class=\"token operator\">></span>시작<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>button<span class=\"token operator\">></span>\n      <span class=\"token operator\">&lt;</span>button onClick<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token function\">handleClick</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"종료\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span><span class=\"token operator\">></span>종료<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>button<span class=\"token operator\">></span>\n    <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span><span class=\"token operator\">></span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>위와 같이 선언하는 이유는 화살표 함수를 사용하지 않으면 render에서 바로 함수가 실행되기 때문이다. <a href=\"https://reactjs.org/docs/handling-events.html#passing-arguments-to-event-handlers\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">리액트 공식문서</a>에서도 argument를 이벤트핸들러에 넘기기 위해서는 위와 같이 작성하라고 되어있다. 추가로 타입스크립트의 경우에는 단순히 <code class=\"language-text\">handleClick(\"종료\")</code>와 같이 작성했을 때는 타입에러도 발생한다.</p>\n<p>그리고 두 버튼은 같은 일을 하는데 이벤트를 인자로 사용하는 점에만 차이가 있다. 이 경우 커링을 활용하면 같은 이벤트 핸들러를 재사용 할 수 있다. 위 코드는 아래와 같이 수정이 가능하다.</p>\n<div class=\"gatsby-highlight\" data-language=\"typescript\"><pre class=\"language-typescript\"><code class=\"language-typescript\"><span class=\"token keyword\">function</span> <span class=\"token function\">ComponentA</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">handleClick</span> <span class=\"token operator\">=</span>\n    <span class=\"token punctuation\">(</span>item<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span>event<span class=\"token operator\">:</span> React<span class=\"token punctuation\">.</span>MouseEvent<span class=\"token operator\">&lt;</span>HTMLButtonElement<span class=\"token operator\">></span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n      <span class=\"token function\">alert</span><span class=\"token punctuation\">(</span>item<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token operator\">&lt;</span><span class=\"token operator\">></span>\n      <span class=\"token operator\">&lt;</span>button onClick<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token function\">handleClick</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"시작\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span><span class=\"token operator\">></span>연결 시작<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>button<span class=\"token operator\">></span>\n      <span class=\"token operator\">&lt;</span>button onClick<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token function\">handleClick</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"종료\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span><span class=\"token operator\">></span>연결 종료<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>button<span class=\"token operator\">></span>\n    <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span><span class=\"token operator\">></span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>직전에 화살표 함수를 사용하지 않고 이벤트핸들러에 인자를 넘겨주면 함수가 바로 실행된다고 했다. 하지만 이렇게 작성한 경우에는 그렇지 않다. 왜냐하면 currying을 적용한 함수의 경우에는 함수의 인자들이 넘어와야 실행이 되는데, 해당 버튼을 클릭하기 전에는 이벤트가 해당 이벤트 핸들러에 전달되지 않기 때문이다.</p>\n<p>이벤트 핸들러가 정상적으로 작동하는 또 다른 이유는 자바스크립트의 <a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Closures\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">closure</a> 때문이다. <code class=\"language-text\">onClick</code>에 <code class=\"language-text\">handleClick(\"시작\")</code>을 할당하는 순간, event를 인자로 받는 inner function은 외부 함수인 <code class=\"language-text\">item</code>에 접근할 수 있다. 따라서 클릭 이벤트를 해당 이벤트 핸들러에 인자로 전달할 때, outer function의 scope를 가지고 있기 때문에 정상적으로 <code class=\"language-text\">alert</code>가 작동하는 것이다.</p>\n<p>이벤트를 직접적으로 이벤트 핸들러에 인자로 넘겨주지는 않지만, MDN의 <a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Closures#practical_closures\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Practical Closures</a>섹션에서도 이벤트에 currying을 사용할 것을 권장한다. 어떠한 일이 일어날지를 정의한 함수를 선언한 다음, 해당 함수를 이벤트 핸들러로 할용하는 것이다.</p>\n<div class=\"gatsby-highlight\" data-language=\"typescript\"><pre class=\"language-typescript\"><code class=\"language-typescript\"><span class=\"token keyword\">function</span> <span class=\"token function\">makeSizer</span><span class=\"token punctuation\">(</span>size<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    document<span class=\"token punctuation\">.</span>body<span class=\"token punctuation\">.</span>style<span class=\"token punctuation\">.</span>fontSize <span class=\"token operator\">=</span> size <span class=\"token operator\">+</span> <span class=\"token string\">\"px\"</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">var</span> size12 <span class=\"token operator\">=</span> <span class=\"token function\">makeSizer</span><span class=\"token punctuation\">(</span><span class=\"token number\">12</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">var</span> size14 <span class=\"token operator\">=</span> <span class=\"token function\">makeSizer</span><span class=\"token punctuation\">(</span><span class=\"token number\">14</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">var</span> size16 <span class=\"token operator\">=</span> <span class=\"token function\">makeSizer</span><span class=\"token punctuation\">(</span><span class=\"token number\">16</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\ndocument<span class=\"token punctuation\">.</span><span class=\"token function\">getElementById</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"size-12\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>onclick <span class=\"token operator\">=</span> size12<span class=\"token punctuation\">;</span>\ndocument<span class=\"token punctuation\">.</span><span class=\"token function\">getElementById</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"size-14\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>onclick <span class=\"token operator\">=</span> size14<span class=\"token punctuation\">;</span>\ndocument<span class=\"token punctuation\">.</span><span class=\"token function\">getElementById</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"size-16\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>onclick <span class=\"token operator\">=</span> size16<span class=\"token punctuation\">;</span></code></pre></div>\n<p>위 예제를 리액트스럽게 변환하면 아래와 같다</p>\n<div class=\"gatsby-highlight\" data-language=\"typescript\"><pre class=\"language-typescript\"><code class=\"language-typescript\">\n<span class=\"token keyword\">function</span> SizeComponent <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">makeSizer</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>size<span class=\"token punctuation\">)</span>  <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    document<span class=\"token punctuation\">.</span>body<span class=\"token punctuation\">.</span>style<span class=\"token punctuation\">.</span>fontSize <span class=\"token operator\">=</span> size <span class=\"token operator\">+</span> <span class=\"token string\">\"px\"</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token operator\">&lt;</span><span class=\"token operator\">></span>\n      <span class=\"token operator\">&lt;</span>button id<span class=\"token operator\">=</span><span class=\"token string\">\"size-12\"</span> onClick<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token function\">makeSizer</span><span class=\"token punctuation\">(</span><span class=\"token number\">12</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span><span class=\"token operator\">></span><span class=\"token number\">12</span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>button<span class=\"token operator\">></span>\n      <span class=\"token operator\">&lt;</span>button id<span class=\"token operator\">=</span><span class=\"token string\">\"size-14\"</span> onClick<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token function\">makeSizer</span><span class=\"token punctuation\">(</span><span class=\"token number\">14</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span><span class=\"token operator\">></span><span class=\"token number\">14</span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>button<span class=\"token operator\">></span>\n      <span class=\"token operator\">&lt;</span>button id<span class=\"token operator\">=</span><span class=\"token string\">\"size-16\"</span> onClick<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token function\">makeSizer</span><span class=\"token punctuation\">(</span><span class=\"token number\">16</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span><span class=\"token operator\">></span><span class=\"token number\">16</span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>button<span class=\"token operator\">></span>\n    <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span><span class=\"token operator\">></span>\n  <span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span></code></pre></div>","fields":{"slug":"/posts/2022//react/functional-programming-with-react-part-four","tagSlugs":["/tag/react/"]},"frontmatter":{"date":"2022-06-16T18:53:37.121Z","description":"리액트 이벤트 핸들러에 currying을 적용하는 법","tags":["React"],"title":"Functional Programming with React [4] - Currying","socialImage":null}}},"pageContext":{"slug":"/posts/2022//react/functional-programming-with-react-part-four"}},"staticQueryHashes":["251939775","288581551","401334301"]}