{"componentChunkName":"component---src-templates-post-template-post-template-tsx","path":"/sql/database-indexing","result":{"data":{"markdownRemark":{"id":"97aaad2f-b540-5567-8f50-0a40067996bd","html":"<h1 id=\"tldr\" style=\"position:relative;\"><a href=\"#tldr\" aria-label=\"tldr permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>TL;DR</h1>\n<h3 id=\"데이터베이스-column-중-중복도가-가장-낮은-컬럼에-인덱싱을-적용하면-쿼리-속도가-매우-빨라진다\" style=\"position:relative;\"><a href=\"#%EB%8D%B0%EC%9D%B4%ED%84%B0%EB%B2%A0%EC%9D%B4%EC%8A%A4-column-%EC%A4%91-%EC%A4%91%EB%B3%B5%EB%8F%84%EA%B0%80-%EA%B0%80%EC%9E%A5-%EB%82%AE%EC%9D%80-%EC%BB%AC%EB%9F%BC%EC%97%90-%EC%9D%B8%EB%8D%B1%EC%8B%B1%EC%9D%84-%EC%A0%81%EC%9A%A9%ED%95%98%EB%A9%B4-%EC%BF%BC%EB%A6%AC-%EC%86%8D%EB%8F%84%EA%B0%80-%EB%A7%A4%EC%9A%B0-%EB%B9%A8%EB%9D%BC%EC%A7%84%EB%8B%A4\" aria-label=\"데이터베이스 column 중 중복도가 가장 낮은 컬럼에 인덱싱을 적용하면 쿼리 속도가 매우 빨라진다 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>데이터베이스 column 중 중복도가 가장 낮은 컬럼에 인덱싱을 적용하면 쿼리 속도가 매우 빨라진다</h3>\n<p>언젠가부터 회사에서 리스트를 조회하는 쿼리가 매우 느려졌다. 다른 프로젝트를 담당하는 개발자분이 DB에 인덱싱을 적용해보라고 하셔서 찾아봤다.</p>\n<p>요약하면 인덱싱은 데이터베이스 검색속도를 향상시키는 도구이다</p>\n<p>책을 읽는다고 가정할 때 “목차”로 봐도 좋다. 몇몇 블로그에서는 인덱싱을 자료구조라고도 부르는데, 이는 인덱싱이 B+Tree 구조이기 때문이다. B+Tree 구조에 대해서는 다음에 자세히 글을 작성해보도록 하겠다.</p>\n<hr>\n<p>레스토랑 예약을 예로 들어보자. 식당예약은 예약 신청한 날짜보다, 식사를 예약한 날짜를 기준으로 테이블을 조회할 가능성이 높다. 극단적으로 만약 A가 3개월 뒤의 저녁식사를 오늘 예약했고, B가 1주일 뒤의 점심 식사를 3일 뒤에 예약했다고 하자. 이런경우 <code class=\"language-text\">auto_increment</code> 값을 사용해서 테이블을 조회하면 매우 비효율적이다. 따라서, 인덱싱을 식사를 예약한 날짜에 적용하면, 오늘 예약을 조회할 때 더욱 효율적일 수 있다.</p>\n<div class=\"gatsby-highlight\" data-language=\"sql\"><pre class=\"language-sql\"><code class=\"language-sql\"><span class=\"token keyword\">SELECT</span> <span class=\"token operator\">*</span> <span class=\"token keyword\">FROM</span> reservation <span class=\"token keyword\">WHERE</span> requested_at <span class=\"token operator\">LIKE</span> <span class=\"token string\">'2022-05-16%'</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>인덱싱을 어떤 column에 적용할 지 고민할 때 가장 중요한 것은</p>\n<ol>\n<li>최대한 중복도가 낮아야하고,</li>\n<li>UPDATE 가 빈번하게 일어나지 않는 값이어야 한다.</li>\n</ol>\n<p>많이 중복되는 값을 피해야 하는 이유는, 데이터가 충분히 걸러지지 않기 때문이다. 다시 식당예약으로 돌아가보자. 만약 모든 예약들을 점심예약/저녁예약으로만 구분한다면. 점심장사와 저녁장사를 같은 시간동안 진행한다고 할 때, 인덱싱을 한다고 하더라도 해당 테이블을 두 분류로 밖에 나누지 못한다.</p>\n<p>UPDATE 가 빈번하게 일어나는 값들을 피해야 하는 이유는, 인덱스는 결국 포인터를 가리키게 되는데, UPDATE 가 빈번하게 일어난다면, 해당 포인터가 계속 변경되기 때문이다. 그림으로 같이 이해해보도록 하자</p>\n<p><img src=\"https://i.imgur.com/tTyReKB.png\" alt=\"MySQL without index\"></p>\n<p>위와 같은 테이블에서 2022년 4월 17일의 예약을 조회하는 경우, 필요없는 값들도 같이 훑어봐야 하는 문제가 있다. 인덱싱을 적용하면 이런식으로 조회가 가능하다. 따서 해당 값이 업데이트가 자주 일어난다면, 왼쪽 테이블이 자주 수정되는 문제가 발생할 수 있다.</p>\n<p><img src=\"https://i.imgur.com/pgkBs06.png\" alt=\"MySQL with index\"></p>\n<p>그림으로 어느정도 이해도를 쌓았으니 이제 코드에서 시간을 확인해보도록 한다.</p>\n<p>식당 예약을 예로 들었으니 database 안에 <code class=\"language-text\">reservation</code>이라는 테이블을 생성한다.</p>\n<div class=\"gatsby-highlight\" data-language=\"sql\"><pre class=\"language-sql\"><code class=\"language-sql\"><span class=\"token keyword\">CREATE</span> <span class=\"token keyword\">TABLE</span> reservation <span class=\"token punctuation\">(</span>\n  id <span class=\"token keyword\">INT</span><span class=\"token punctuation\">(</span><span class=\"token number\">7</span><span class=\"token punctuation\">)</span> AUTO_INCREEMENT <span class=\"token keyword\">PRIMARY</span> <span class=\"token keyword\">KEY</span><span class=\"token punctuation\">,</span>\n  requested_at <span class=\"token keyword\">DATE</span><span class=\"token punctuation\">,</span>\n  num_customer <span class=\"token keyword\">INT</span><span class=\"token punctuation\">(</span><span class=\"token number\">2</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n  created_at <span class=\"token keyword\">TIMESTAMP</span> <span class=\"token keyword\">DEFAULT</span> <span class=\"token keyword\">CURRENT_TIMESTAMP</span><span class=\"token punctuation\">,</span>\n  name <span class=\"token keyword\">VARCHAR</span><span class=\"token punctuation\">(</span><span class=\"token number\">16</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n  phone <span class=\"token keyword\">VARCHAR</span><span class=\"token punctuation\">(</span><span class=\"token number\">16</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n  <span class=\"token keyword\">time</span> <span class=\"token keyword\">TIME</span>\n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>테이블을 생성하고, random data generation 을 위한 procedure를 생성한다.</p>\n<div class=\"gatsby-highlight\" data-language=\"sql\"><pre class=\"language-sql\"><code class=\"language-sql\"><span class=\"token keyword\">DELIMITER</span> $$\n<span class=\"token keyword\">CREATE</span> <span class=\"token keyword\">PROCEDURE</span> generate_reservation<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">BEGIN</span>\n  <span class=\"token keyword\">DECLARE</span> i <span class=\"token keyword\">INT</span> <span class=\"token keyword\">DEFAULT</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">WHILE</span> i <span class=\"token operator\">&lt;</span> <span class=\"token number\">1000000</span> <span class=\"token keyword\">DO</span>\n    <span class=\"token keyword\">INSERT</span> <span class=\"token keyword\">INTO</span> <span class=\"token identifier\"><span class=\"token punctuation\">`</span>reservation<span class=\"token punctuation\">`</span></span> <span class=\"token punctuation\">(</span><span class=\"token identifier\"><span class=\"token punctuation\">`</span>requested_at<span class=\"token punctuation\">`</span></span><span class=\"token punctuation\">,</span> <span class=\"token identifier\"><span class=\"token punctuation\">`</span>num_customer<span class=\"token punctuation\">`</span></span><span class=\"token punctuation\">,</span> <span class=\"token identifier\"><span class=\"token punctuation\">`</span>name<span class=\"token punctuation\">`</span></span><span class=\"token punctuation\">,</span> <span class=\"token identifier\"><span class=\"token punctuation\">`</span>phone<span class=\"token punctuation\">`</span></span><span class=\"token punctuation\">,</span> <span class=\"token identifier\"><span class=\"token punctuation\">`</span>time<span class=\"token punctuation\">`</span></span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">VALUES</span> <span class=\"token punctuation\">(</span>\n      FROM_UNIXTIME<span class=\"token punctuation\">(</span><span class=\"token function\">ROUND</span><span class=\"token punctuation\">(</span>RAND<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">*</span> <span class=\"token punctuation\">(</span><span class=\"token number\">1651319994</span><span class=\"token operator\">-</span><span class=\"token number\">1648814394</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">+</span> <span class=\"token number\">1648814394</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n      FLOOR<span class=\"token punctuation\">(</span>RAND<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token operator\">*</span> <span class=\"token punctuation\">(</span><span class=\"token number\">10</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span>\n      SUBSTRING<span class=\"token punctuation\">(</span>MD5<span class=\"token punctuation\">(</span>RAND<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">FROM</span> <span class=\"token number\">1</span> <span class=\"token keyword\">FOR</span> <span class=\"token number\">7</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n      SUBSTRING<span class=\"token punctuation\">(</span>MD5<span class=\"token punctuation\">(</span>RAND<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">FROM</span> <span class=\"token number\">1</span> <span class=\"token keyword\">FOR</span> <span class=\"token number\">7</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n      SEC_TO_TIME<span class=\"token punctuation\">(</span>FLOOR<span class=\"token punctuation\">(</span>TIME_TO_SEC<span class=\"token punctuation\">(</span><span class=\"token string\">'15:00:00'</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">+</span> RAND<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">*</span> <span class=\"token punctuation\">(</span>TIME_TO_SEC<span class=\"token punctuation\">(</span>TIMEDIFF<span class=\"token punctuation\">(</span><span class=\"token string\">'22:00:00'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'15:00:00'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">SET</span> i <span class=\"token operator\">=</span> i <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">END</span> <span class=\"token keyword\">WHILE</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">END</span>$$</code></pre></div>\n<p><code class=\"language-text\">phone</code> 은 <code class=\"language-text\">regex</code> 를 사용하면 형식을 맞출 수 있을 것 같긴한데, database index테스트 목적에 크게 의미없을 것 같아서 찾아보지 않았다. for loop이라 오래 걸리는 건지는 모르지만 1,000,000 row를 생성하는데 14분 58.65초 소요됐다. 이제 쿼리를 해보자.</p>\n<div class=\"gatsby-highlight\" data-language=\"sql\"><pre class=\"language-sql\"><code class=\"language-sql\"><span class=\"token keyword\">SELECT</span> <span class=\"token operator\">*</span> <span class=\"token keyword\">FROM</span> reservation <span class=\"token keyword\">WHERE</span> name <span class=\"token operator\">LIKE</span> <span class=\"token string\">'2b%'</span> <span class=\"token operator\">AND</span> <span class=\"token keyword\">time</span> <span class=\"token operator\">LIKE</span> <span class=\"token string\">'20:00%'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token operator\">+</span><span class=\"token comment\">--------+--------------+--------------+---------------------+---------+---------+----------+</span>\n<span class=\"token operator\">|</span> id     <span class=\"token operator\">|</span> requested_at <span class=\"token operator\">|</span> num_customer <span class=\"token operator\">|</span> created_at          <span class=\"token operator\">|</span> name    <span class=\"token operator\">|</span> phone   <span class=\"token operator\">|</span> <span class=\"token keyword\">time</span>     <span class=\"token operator\">|</span>\n<span class=\"token operator\">+</span><span class=\"token comment\">--------+--------------+--------------+---------------------+---------+---------+----------+</span>\n<span class=\"token operator\">|</span>  <span class=\"token number\">75402</span> <span class=\"token operator\">|</span> <span class=\"token number\">2022</span><span class=\"token operator\">-</span><span class=\"token number\">04</span><span class=\"token operator\">-</span><span class=\"token number\">30</span>   <span class=\"token operator\">|</span>            <span class=\"token number\">1</span> <span class=\"token operator\">|</span> <span class=\"token number\">2022</span><span class=\"token operator\">-</span><span class=\"token number\">05</span><span class=\"token operator\">-</span><span class=\"token number\">16</span> <span class=\"token number\">21</span>:<span class=\"token number\">11</span>:<span class=\"token number\">50</span> <span class=\"token operator\">|</span> <span class=\"token number\">2</span>b48129 <span class=\"token operator\">|</span> e4205d8 <span class=\"token operator\">|</span> <span class=\"token number\">20</span>:<span class=\"token number\">00</span>:<span class=\"token number\">41</span> <span class=\"token operator\">|</span>\n<span class=\"token operator\">|</span> <span class=\"token number\">173141</span> <span class=\"token operator\">|</span> <span class=\"token number\">2022</span><span class=\"token operator\">-</span><span class=\"token number\">04</span><span class=\"token operator\">-</span><span class=\"token number\">29</span>   <span class=\"token operator\">|</span>            <span class=\"token number\">5</span> <span class=\"token operator\">|</span> <span class=\"token number\">2022</span><span class=\"token operator\">-</span><span class=\"token number\">05</span><span class=\"token operator\">-</span><span class=\"token number\">16</span> <span class=\"token number\">21</span>:<span class=\"token number\">13</span>:<span class=\"token number\">17</span> <span class=\"token operator\">|</span> <span class=\"token number\">2</span>b2e1b4 <span class=\"token operator\">|</span> <span class=\"token number\">9</span>df3407 <span class=\"token operator\">|</span> <span class=\"token number\">20</span>:<span class=\"token number\">00</span>:<span class=\"token number\">01</span> <span class=\"token operator\">|</span>\n<span class=\"token operator\">|</span> <span class=\"token number\">207430</span> <span class=\"token operator\">|</span> <span class=\"token number\">2022</span><span class=\"token operator\">-</span><span class=\"token number\">04</span><span class=\"token operator\">-</span><span class=\"token number\">28</span>   <span class=\"token operator\">|</span>            <span class=\"token number\">2</span> <span class=\"token operator\">|</span> <span class=\"token number\">2022</span><span class=\"token operator\">-</span><span class=\"token number\">05</span><span class=\"token operator\">-</span><span class=\"token number\">16</span> <span class=\"token number\">21</span>:<span class=\"token number\">13</span>:<span class=\"token number\">47</span> <span class=\"token operator\">|</span> <span class=\"token number\">2</span>b31924 <span class=\"token operator\">|</span> <span class=\"token number\">256</span>b363 <span class=\"token operator\">|</span> <span class=\"token number\">20</span>:<span class=\"token number\">00</span>:<span class=\"token number\">50</span> <span class=\"token operator\">|</span>\n<span class=\"token operator\">|</span> <span class=\"token number\">412796</span> <span class=\"token operator\">|</span> <span class=\"token number\">2022</span><span class=\"token operator\">-</span><span class=\"token number\">04</span><span class=\"token operator\">-</span><span class=\"token number\">10</span>   <span class=\"token operator\">|</span>            <span class=\"token number\">8</span> <span class=\"token operator\">|</span> <span class=\"token number\">2022</span><span class=\"token operator\">-</span><span class=\"token number\">05</span><span class=\"token operator\">-</span><span class=\"token number\">16</span> <span class=\"token number\">21</span>:<span class=\"token number\">16</span>:<span class=\"token number\">51</span> <span class=\"token operator\">|</span> <span class=\"token number\">2</span>b6c98c <span class=\"token operator\">|</span> af6dd3a <span class=\"token operator\">|</span> <span class=\"token number\">20</span>:<span class=\"token number\">00</span>:<span class=\"token number\">43</span> <span class=\"token operator\">|</span>\n<span class=\"token operator\">|</span> <span class=\"token number\">492708</span> <span class=\"token operator\">|</span> <span class=\"token number\">2022</span><span class=\"token operator\">-</span><span class=\"token number\">04</span><span class=\"token operator\">-</span><span class=\"token number\">07</span>   <span class=\"token operator\">|</span>            <span class=\"token number\">2</span> <span class=\"token operator\">|</span> <span class=\"token number\">2022</span><span class=\"token operator\">-</span><span class=\"token number\">05</span><span class=\"token operator\">-</span><span class=\"token number\">16</span> <span class=\"token number\">21</span>:<span class=\"token number\">18</span>:<span class=\"token number\">02</span> <span class=\"token operator\">|</span> <span class=\"token number\">2</span>b14a6b <span class=\"token operator\">|</span> <span class=\"token number\">274</span>ab3d <span class=\"token operator\">|</span> <span class=\"token number\">20</span>:<span class=\"token number\">00</span>:<span class=\"token number\">03</span> <span class=\"token operator\">|</span>\n<span class=\"token operator\">|</span> <span class=\"token number\">610563</span> <span class=\"token operator\">|</span> <span class=\"token number\">2022</span><span class=\"token operator\">-</span><span class=\"token number\">04</span><span class=\"token operator\">-</span><span class=\"token number\">04</span>   <span class=\"token operator\">|</span>            <span class=\"token number\">7</span> <span class=\"token operator\">|</span> <span class=\"token number\">2022</span><span class=\"token operator\">-</span><span class=\"token number\">05</span><span class=\"token operator\">-</span><span class=\"token number\">16</span> <span class=\"token number\">21</span>:<span class=\"token number\">19</span>:<span class=\"token number\">46</span> <span class=\"token operator\">|</span> <span class=\"token number\">2</span>b6ccba <span class=\"token operator\">|</span> <span class=\"token number\">53</span>e06ac <span class=\"token operator\">|</span> <span class=\"token number\">20</span>:<span class=\"token number\">00</span>:<span class=\"token number\">32</span> <span class=\"token operator\">|</span>\n<span class=\"token operator\">|</span> <span class=\"token number\">646019</span> <span class=\"token operator\">|</span> <span class=\"token number\">2022</span><span class=\"token operator\">-</span><span class=\"token number\">04</span><span class=\"token operator\">-</span><span class=\"token number\">09</span>   <span class=\"token operator\">|</span>            <span class=\"token number\">3</span> <span class=\"token operator\">|</span> <span class=\"token number\">2022</span><span class=\"token operator\">-</span><span class=\"token number\">05</span><span class=\"token operator\">-</span><span class=\"token number\">16</span> <span class=\"token number\">21</span>:<span class=\"token number\">20</span>:<span class=\"token number\">19</span> <span class=\"token operator\">|</span> <span class=\"token number\">2</span>b43c53 <span class=\"token operator\">|</span> <span class=\"token number\">0</span>d3dd41 <span class=\"token operator\">|</span> <span class=\"token number\">20</span>:<span class=\"token number\">00</span>:<span class=\"token number\">59</span> <span class=\"token operator\">|</span>\n<span class=\"token operator\">|</span> <span class=\"token number\">702301</span> <span class=\"token operator\">|</span> <span class=\"token number\">2022</span><span class=\"token operator\">-</span><span class=\"token number\">04</span><span class=\"token operator\">-</span><span class=\"token number\">21</span>   <span class=\"token operator\">|</span>            <span class=\"token number\">6</span> <span class=\"token operator\">|</span> <span class=\"token number\">2022</span><span class=\"token operator\">-</span><span class=\"token number\">05</span><span class=\"token operator\">-</span><span class=\"token number\">16</span> <span class=\"token number\">21</span>:<span class=\"token number\">21</span>:<span class=\"token number\">15</span> <span class=\"token operator\">|</span> <span class=\"token number\">2</span>b57afe <span class=\"token operator\">|</span> <span class=\"token number\">8549</span>b1b <span class=\"token operator\">|</span> <span class=\"token number\">20</span>:<span class=\"token number\">00</span>:<span class=\"token number\">25</span> <span class=\"token operator\">|</span>\n<span class=\"token operator\">|</span> <span class=\"token number\">798381</span> <span class=\"token operator\">|</span> <span class=\"token number\">2022</span><span class=\"token operator\">-</span><span class=\"token number\">04</span><span class=\"token operator\">-</span><span class=\"token number\">23</span>   <span class=\"token operator\">|</span>            <span class=\"token number\">8</span> <span class=\"token operator\">|</span> <span class=\"token number\">2022</span><span class=\"token operator\">-</span><span class=\"token number\">05</span><span class=\"token operator\">-</span><span class=\"token number\">16</span> <span class=\"token number\">21</span>:<span class=\"token number\">22</span>:<span class=\"token number\">43</span> <span class=\"token operator\">|</span> <span class=\"token number\">2</span>b4bf39 <span class=\"token operator\">|</span> cde432b <span class=\"token operator\">|</span> <span class=\"token number\">20</span>:<span class=\"token number\">00</span>:<span class=\"token number\">15</span> <span class=\"token operator\">|</span>\n<span class=\"token operator\">|</span> <span class=\"token number\">839637</span> <span class=\"token operator\">|</span> <span class=\"token number\">2022</span><span class=\"token operator\">-</span><span class=\"token number\">04</span><span class=\"token operator\">-</span><span class=\"token number\">24</span>   <span class=\"token operator\">|</span>            <span class=\"token number\">4</span> <span class=\"token operator\">|</span> <span class=\"token number\">2022</span><span class=\"token operator\">-</span><span class=\"token number\">05</span><span class=\"token operator\">-</span><span class=\"token number\">16</span> <span class=\"token number\">21</span>:<span class=\"token number\">23</span>:<span class=\"token number\">20</span> <span class=\"token operator\">|</span> <span class=\"token number\">2</span>b8adfc <span class=\"token operator\">|</span> <span class=\"token number\">366</span>a865 <span class=\"token operator\">|</span> <span class=\"token number\">20</span>:<span class=\"token number\">00</span>:<span class=\"token number\">24</span> <span class=\"token operator\">|</span>\n<span class=\"token operator\">|</span> <span class=\"token number\">999538</span> <span class=\"token operator\">|</span> <span class=\"token number\">2022</span><span class=\"token operator\">-</span><span class=\"token number\">04</span><span class=\"token operator\">-</span><span class=\"token number\">24</span>   <span class=\"token operator\">|</span>            <span class=\"token number\">7</span> <span class=\"token operator\">|</span> <span class=\"token number\">2022</span><span class=\"token operator\">-</span><span class=\"token number\">05</span><span class=\"token operator\">-</span><span class=\"token number\">16</span> <span class=\"token number\">21</span>:<span class=\"token number\">25</span>:<span class=\"token number\">42</span> <span class=\"token operator\">|</span> <span class=\"token number\">2</span>bf2434 <span class=\"token operator\">|</span> f91cefd <span class=\"token operator\">|</span> <span class=\"token number\">20</span>:<span class=\"token number\">00</span>:<span class=\"token number\">27</span> <span class=\"token operator\">|</span>\n<span class=\"token operator\">+</span><span class=\"token comment\">--------+--------------+--------------+---------------------+---------+---------+----------+</span>\n<span class=\"token number\">11</span> <span class=\"token keyword\">rows</span> <span class=\"token operator\">in</span> <span class=\"token keyword\">set</span> <span class=\"token punctuation\">(</span><span class=\"token number\">0.45</span> sec<span class=\"token punctuation\">)</span></code></pre></div>\n<p><strong>인덱싱 없이 쿼리를 하니 0.45초 소요됐다.</strong>\n인덱스를 추가하기 위해 중복값이 제일 적은 컬럼을 찾아보도록 한다.</p>\n<div class=\"gatsby-highlight\" data-language=\"sql\"><pre class=\"language-sql\"><code class=\"language-sql\"><span class=\"token keyword\">SELECT</span>\n  <span class=\"token function\">COUNT</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">DISTINCT</span><span class=\"token punctuation\">(</span>requested_at<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> requested_at<span class=\"token punctuation\">,</span>\n  <span class=\"token function\">COUNT</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">DISTINCT</span><span class=\"token punctuation\">(</span>num_customer<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> num_customer<span class=\"token punctuation\">,</span>\n  <span class=\"token function\">COUNT</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">DISTINCT</span><span class=\"token punctuation\">(</span>name<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> name<span class=\"token punctuation\">,</span>\n  <span class=\"token function\">COUNT</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">DISTINCT</span><span class=\"token punctuation\">(</span>created_at<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> created_at<span class=\"token punctuation\">,</span>\n  <span class=\"token function\">COUNT</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">DISTINCT</span><span class=\"token punctuation\">(</span>phone<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> phone<span class=\"token punctuation\">,</span>\n  <span class=\"token function\">COUNT</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">DISTINCT</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">time</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">time</span><span class=\"token punctuation\">,</span>\n<span class=\"token keyword\">FROM</span> reservation<span class=\"token punctuation\">;</span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"sql\"><pre class=\"language-sql\"><code class=\"language-sql\"><span class=\"token operator\">+</span><span class=\"token comment\">--------------+--------------+--------+------------+--------+-------+</span>\n<span class=\"token operator\">|</span> requested_at <span class=\"token operator\">|</span> num_customer <span class=\"token operator\">|</span> name   <span class=\"token operator\">|</span> created_at <span class=\"token operator\">|</span> phone  <span class=\"token operator\">|</span> <span class=\"token keyword\">time</span>  <span class=\"token operator\">|</span>\n<span class=\"token operator\">+</span><span class=\"token comment\">--------------+--------------+--------+------------+--------+-------+</span>\n<span class=\"token operator\">|</span>           <span class=\"token number\">30</span> <span class=\"token operator\">|</span>           <span class=\"token number\">10</span> <span class=\"token operator\">|</span> <span class=\"token number\">853470</span> <span class=\"token operator\">|</span>        <span class=\"token number\">901</span> <span class=\"token operator\">|</span> <span class=\"token number\">853378</span> <span class=\"token operator\">|</span> <span class=\"token number\">25201</span> <span class=\"token operator\">|</span>\n<span class=\"token operator\">+</span><span class=\"token comment\">--------------+--------------+--------+------------+--------+-------+</span></code></pre></div>\n<p>phone과 name을 둘 다 random한 varchar로 생성했으니 어쩔 수 없는 것 같다. 둘 중에 하나는 범위를 줄일걸 싶다. 그럼 일단 중복도가 제일 낮은 name 에 인덱스를 걸도록 하겠다.</p>\n<div class=\"gatsby-highlight\" data-language=\"sql\"><pre class=\"language-sql\"><code class=\"language-sql\"><span class=\"token keyword\">CREATE</span> <span class=\"token keyword\">INDEX</span> name_index <span class=\"token keyword\">ON</span> reservation <span class=\"token punctuation\">(</span>name<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>인덱스 생성도 3.28초 소요된다. 그럼 이제 인덱스를 사용해서 쿼리 해보도록 하겠다.</p>\n<div class=\"gatsby-highlight\" data-language=\"sql\"><pre class=\"language-sql\"><code class=\"language-sql\"><span class=\"token keyword\">SELECT</span> <span class=\"token operator\">*</span> <span class=\"token keyword\">FROM</span> reservation <span class=\"token keyword\">USE</span> <span class=\"token keyword\">INDEX</span> <span class=\"token punctuation\">(</span>name_index<span class=\"token punctuation\">)</span> <span class=\"token keyword\">WHERE</span> name <span class=\"token operator\">LIKE</span> <span class=\"token string\">'2b%'</span> <span class=\"token operator\">AND</span> <span class=\"token keyword\">time</span> <span class=\"token operator\">LIKE</span> <span class=\"token string\">'20:00%'</span><span class=\"token punctuation\">;</span>\n<span class=\"token operator\">+</span><span class=\"token comment\">--------+--------------+--------------+---------------------+---------+---------+----------+</span>\n<span class=\"token operator\">|</span> id     <span class=\"token operator\">|</span> requested_at <span class=\"token operator\">|</span> num_customer <span class=\"token operator\">|</span> created_at          <span class=\"token operator\">|</span> name    <span class=\"token operator\">|</span> phone   <span class=\"token operator\">|</span> <span class=\"token keyword\">time</span>     <span class=\"token operator\">|</span>\n<span class=\"token operator\">+</span><span class=\"token comment\">--------+--------------+--------------+---------------------+---------+---------+----------+</span>\n<span class=\"token operator\">|</span> <span class=\"token number\">492708</span> <span class=\"token operator\">|</span> <span class=\"token number\">2022</span><span class=\"token operator\">-</span><span class=\"token number\">04</span><span class=\"token operator\">-</span><span class=\"token number\">07</span>   <span class=\"token operator\">|</span>            <span class=\"token number\">2</span> <span class=\"token operator\">|</span> <span class=\"token number\">2022</span><span class=\"token operator\">-</span><span class=\"token number\">05</span><span class=\"token operator\">-</span><span class=\"token number\">16</span> <span class=\"token number\">21</span>:<span class=\"token number\">18</span>:<span class=\"token number\">02</span> <span class=\"token operator\">|</span> <span class=\"token number\">2</span>b14a6b <span class=\"token operator\">|</span> <span class=\"token number\">274</span>ab3d <span class=\"token operator\">|</span> <span class=\"token number\">20</span>:<span class=\"token number\">00</span>:<span class=\"token number\">03</span> <span class=\"token operator\">|</span>\n<span class=\"token operator\">|</span> <span class=\"token number\">173141</span> <span class=\"token operator\">|</span> <span class=\"token number\">2022</span><span class=\"token operator\">-</span><span class=\"token number\">04</span><span class=\"token operator\">-</span><span class=\"token number\">29</span>   <span class=\"token operator\">|</span>            <span class=\"token number\">5</span> <span class=\"token operator\">|</span> <span class=\"token number\">2022</span><span class=\"token operator\">-</span><span class=\"token number\">05</span><span class=\"token operator\">-</span><span class=\"token number\">16</span> <span class=\"token number\">21</span>:<span class=\"token number\">13</span>:<span class=\"token number\">17</span> <span class=\"token operator\">|</span> <span class=\"token number\">2</span>b2e1b4 <span class=\"token operator\">|</span> <span class=\"token number\">9</span>df3407 <span class=\"token operator\">|</span> <span class=\"token number\">20</span>:<span class=\"token number\">00</span>:<span class=\"token number\">01</span> <span class=\"token operator\">|</span>\n<span class=\"token operator\">|</span> <span class=\"token number\">207430</span> <span class=\"token operator\">|</span> <span class=\"token number\">2022</span><span class=\"token operator\">-</span><span class=\"token number\">04</span><span class=\"token operator\">-</span><span class=\"token number\">28</span>   <span class=\"token operator\">|</span>            <span class=\"token number\">2</span> <span class=\"token operator\">|</span> <span class=\"token number\">2022</span><span class=\"token operator\">-</span><span class=\"token number\">05</span><span class=\"token operator\">-</span><span class=\"token number\">16</span> <span class=\"token number\">21</span>:<span class=\"token number\">13</span>:<span class=\"token number\">47</span> <span class=\"token operator\">|</span> <span class=\"token number\">2</span>b31924 <span class=\"token operator\">|</span> <span class=\"token number\">256</span>b363 <span class=\"token operator\">|</span> <span class=\"token number\">20</span>:<span class=\"token number\">00</span>:<span class=\"token number\">50</span> <span class=\"token operator\">|</span>\n<span class=\"token operator\">|</span> <span class=\"token number\">646019</span> <span class=\"token operator\">|</span> <span class=\"token number\">2022</span><span class=\"token operator\">-</span><span class=\"token number\">04</span><span class=\"token operator\">-</span><span class=\"token number\">09</span>   <span class=\"token operator\">|</span>            <span class=\"token number\">3</span> <span class=\"token operator\">|</span> <span class=\"token number\">2022</span><span class=\"token operator\">-</span><span class=\"token number\">05</span><span class=\"token operator\">-</span><span class=\"token number\">16</span> <span class=\"token number\">21</span>:<span class=\"token number\">20</span>:<span class=\"token number\">19</span> <span class=\"token operator\">|</span> <span class=\"token number\">2</span>b43c53 <span class=\"token operator\">|</span> <span class=\"token number\">0</span>d3dd41 <span class=\"token operator\">|</span> <span class=\"token number\">20</span>:<span class=\"token number\">00</span>:<span class=\"token number\">59</span> <span class=\"token operator\">|</span>\n<span class=\"token operator\">|</span>  <span class=\"token number\">75402</span> <span class=\"token operator\">|</span> <span class=\"token number\">2022</span><span class=\"token operator\">-</span><span class=\"token number\">04</span><span class=\"token operator\">-</span><span class=\"token number\">30</span>   <span class=\"token operator\">|</span>            <span class=\"token number\">1</span> <span class=\"token operator\">|</span> <span class=\"token number\">2022</span><span class=\"token operator\">-</span><span class=\"token number\">05</span><span class=\"token operator\">-</span><span class=\"token number\">16</span> <span class=\"token number\">21</span>:<span class=\"token number\">11</span>:<span class=\"token number\">50</span> <span class=\"token operator\">|</span> <span class=\"token number\">2</span>b48129 <span class=\"token operator\">|</span> e4205d8 <span class=\"token operator\">|</span> <span class=\"token number\">20</span>:<span class=\"token number\">00</span>:<span class=\"token number\">41</span> <span class=\"token operator\">|</span>\n<span class=\"token operator\">|</span> <span class=\"token number\">798381</span> <span class=\"token operator\">|</span> <span class=\"token number\">2022</span><span class=\"token operator\">-</span><span class=\"token number\">04</span><span class=\"token operator\">-</span><span class=\"token number\">23</span>   <span class=\"token operator\">|</span>            <span class=\"token number\">8</span> <span class=\"token operator\">|</span> <span class=\"token number\">2022</span><span class=\"token operator\">-</span><span class=\"token number\">05</span><span class=\"token operator\">-</span><span class=\"token number\">16</span> <span class=\"token number\">21</span>:<span class=\"token number\">22</span>:<span class=\"token number\">43</span> <span class=\"token operator\">|</span> <span class=\"token number\">2</span>b4bf39 <span class=\"token operator\">|</span> cde432b <span class=\"token operator\">|</span> <span class=\"token number\">20</span>:<span class=\"token number\">00</span>:<span class=\"token number\">15</span> <span class=\"token operator\">|</span>\n<span class=\"token operator\">|</span> <span class=\"token number\">702301</span> <span class=\"token operator\">|</span> <span class=\"token number\">2022</span><span class=\"token operator\">-</span><span class=\"token number\">04</span><span class=\"token operator\">-</span><span class=\"token number\">21</span>   <span class=\"token operator\">|</span>            <span class=\"token number\">6</span> <span class=\"token operator\">|</span> <span class=\"token number\">2022</span><span class=\"token operator\">-</span><span class=\"token number\">05</span><span class=\"token operator\">-</span><span class=\"token number\">16</span> <span class=\"token number\">21</span>:<span class=\"token number\">21</span>:<span class=\"token number\">15</span> <span class=\"token operator\">|</span> <span class=\"token number\">2</span>b57afe <span class=\"token operator\">|</span> <span class=\"token number\">8549</span>b1b <span class=\"token operator\">|</span> <span class=\"token number\">20</span>:<span class=\"token number\">00</span>:<span class=\"token number\">25</span> <span class=\"token operator\">|</span>\n<span class=\"token operator\">|</span> <span class=\"token number\">412796</span> <span class=\"token operator\">|</span> <span class=\"token number\">2022</span><span class=\"token operator\">-</span><span class=\"token number\">04</span><span class=\"token operator\">-</span><span class=\"token number\">10</span>   <span class=\"token operator\">|</span>            <span class=\"token number\">8</span> <span class=\"token operator\">|</span> <span class=\"token number\">2022</span><span class=\"token operator\">-</span><span class=\"token number\">05</span><span class=\"token operator\">-</span><span class=\"token number\">16</span> <span class=\"token number\">21</span>:<span class=\"token number\">16</span>:<span class=\"token number\">51</span> <span class=\"token operator\">|</span> <span class=\"token number\">2</span>b6c98c <span class=\"token operator\">|</span> af6dd3a <span class=\"token operator\">|</span> <span class=\"token number\">20</span>:<span class=\"token number\">00</span>:<span class=\"token number\">43</span> <span class=\"token operator\">|</span>\n<span class=\"token operator\">|</span> <span class=\"token number\">610563</span> <span class=\"token operator\">|</span> <span class=\"token number\">2022</span><span class=\"token operator\">-</span><span class=\"token number\">04</span><span class=\"token operator\">-</span><span class=\"token number\">04</span>   <span class=\"token operator\">|</span>            <span class=\"token number\">7</span> <span class=\"token operator\">|</span> <span class=\"token number\">2022</span><span class=\"token operator\">-</span><span class=\"token number\">05</span><span class=\"token operator\">-</span><span class=\"token number\">16</span> <span class=\"token number\">21</span>:<span class=\"token number\">19</span>:<span class=\"token number\">46</span> <span class=\"token operator\">|</span> <span class=\"token number\">2</span>b6ccba <span class=\"token operator\">|</span> <span class=\"token number\">53</span>e06ac <span class=\"token operator\">|</span> <span class=\"token number\">20</span>:<span class=\"token number\">00</span>:<span class=\"token number\">32</span> <span class=\"token operator\">|</span>\n<span class=\"token operator\">|</span> <span class=\"token number\">839637</span> <span class=\"token operator\">|</span> <span class=\"token number\">2022</span><span class=\"token operator\">-</span><span class=\"token number\">04</span><span class=\"token operator\">-</span><span class=\"token number\">24</span>   <span class=\"token operator\">|</span>            <span class=\"token number\">4</span> <span class=\"token operator\">|</span> <span class=\"token number\">2022</span><span class=\"token operator\">-</span><span class=\"token number\">05</span><span class=\"token operator\">-</span><span class=\"token number\">16</span> <span class=\"token number\">21</span>:<span class=\"token number\">23</span>:<span class=\"token number\">20</span> <span class=\"token operator\">|</span> <span class=\"token number\">2</span>b8adfc <span class=\"token operator\">|</span> <span class=\"token number\">366</span>a865 <span class=\"token operator\">|</span> <span class=\"token number\">20</span>:<span class=\"token number\">00</span>:<span class=\"token number\">24</span> <span class=\"token operator\">|</span>\n<span class=\"token operator\">|</span> <span class=\"token number\">999538</span> <span class=\"token operator\">|</span> <span class=\"token number\">2022</span><span class=\"token operator\">-</span><span class=\"token number\">04</span><span class=\"token operator\">-</span><span class=\"token number\">24</span>   <span class=\"token operator\">|</span>            <span class=\"token number\">7</span> <span class=\"token operator\">|</span> <span class=\"token number\">2022</span><span class=\"token operator\">-</span><span class=\"token number\">05</span><span class=\"token operator\">-</span><span class=\"token number\">16</span> <span class=\"token number\">21</span>:<span class=\"token number\">25</span>:<span class=\"token number\">42</span> <span class=\"token operator\">|</span> <span class=\"token number\">2</span>bf2434 <span class=\"token operator\">|</span> f91cefd <span class=\"token operator\">|</span> <span class=\"token number\">20</span>:<span class=\"token number\">00</span>:<span class=\"token number\">27</span> <span class=\"token operator\">|</span>\n<span class=\"token operator\">+</span><span class=\"token comment\">--------+--------------+--------------+---------------------+---------+---------+----------+</span>\n<span class=\"token number\">11</span> <span class=\"token keyword\">rows</span> <span class=\"token operator\">in</span> <span class=\"token keyword\">set</span> <span class=\"token punctuation\">(</span><span class=\"token number\">0.02</span> sec<span class=\"token punctuation\">)</span></code></pre></div>\n<p><strong>중복도가 제일 낮은 값에 인덱싱을 적용하니 0.02초 소요된다.</strong>\n중복성이 적은 column에 인덱싱을 하는 것이 유리하다는 것을 증명하기 위해 time에도 인덱싱을 적용해보겠다.</p>\n<div class=\"gatsby-highlight\" data-language=\"sql\"><pre class=\"language-sql\"><code class=\"language-sql\"><span class=\"token keyword\">CREATE</span> <span class=\"token keyword\">INDEX</span> time_index <span class=\"token keyword\">ON</span> reservation <span class=\"token punctuation\">(</span><span class=\"token keyword\">time</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"sql\"><pre class=\"language-sql\"><code class=\"language-sql\"><span class=\"token keyword\">SELECT</span> <span class=\"token operator\">*</span> <span class=\"token keyword\">FROM</span> reservation <span class=\"token keyword\">USE</span> <span class=\"token keyword\">INDEX</span> <span class=\"token punctuation\">(</span>time_index<span class=\"token punctuation\">)</span> <span class=\"token keyword\">WHERE</span> name <span class=\"token operator\">LIKE</span> <span class=\"token string\">'2b%'</span> <span class=\"token operator\">AND</span> <span class=\"token keyword\">time</span> <span class=\"token operator\">LIKE</span> <span class=\"token string\">'20:00%'</span><span class=\"token punctuation\">;</span>\n<span class=\"token operator\">+</span><span class=\"token comment\">--------+--------------+--------------+---------------------+---------+---------+----------+</span>\n<span class=\"token operator\">|</span> id     <span class=\"token operator\">|</span> requested_at <span class=\"token operator\">|</span> num_customer <span class=\"token operator\">|</span> created_at          <span class=\"token operator\">|</span> name    <span class=\"token operator\">|</span> phone   <span class=\"token operator\">|</span> <span class=\"token keyword\">time</span>     <span class=\"token operator\">|</span>\n<span class=\"token operator\">+</span><span class=\"token comment\">--------+--------------+--------------+---------------------+---------+---------+----------+</span>\n<span class=\"token operator\">|</span>  <span class=\"token number\">75402</span> <span class=\"token operator\">|</span> <span class=\"token number\">2022</span><span class=\"token operator\">-</span><span class=\"token number\">04</span><span class=\"token operator\">-</span><span class=\"token number\">30</span>   <span class=\"token operator\">|</span>            <span class=\"token number\">1</span> <span class=\"token operator\">|</span> <span class=\"token number\">2022</span><span class=\"token operator\">-</span><span class=\"token number\">05</span><span class=\"token operator\">-</span><span class=\"token number\">16</span> <span class=\"token number\">21</span>:<span class=\"token number\">11</span>:<span class=\"token number\">50</span> <span class=\"token operator\">|</span> <span class=\"token number\">2</span>b48129 <span class=\"token operator\">|</span> e4205d8 <span class=\"token operator\">|</span> <span class=\"token number\">20</span>:<span class=\"token number\">00</span>:<span class=\"token number\">41</span> <span class=\"token operator\">|</span>\n<span class=\"token operator\">|</span> <span class=\"token number\">173141</span> <span class=\"token operator\">|</span> <span class=\"token number\">2022</span><span class=\"token operator\">-</span><span class=\"token number\">04</span><span class=\"token operator\">-</span><span class=\"token number\">29</span>   <span class=\"token operator\">|</span>            <span class=\"token number\">5</span> <span class=\"token operator\">|</span> <span class=\"token number\">2022</span><span class=\"token operator\">-</span><span class=\"token number\">05</span><span class=\"token operator\">-</span><span class=\"token number\">16</span> <span class=\"token number\">21</span>:<span class=\"token number\">13</span>:<span class=\"token number\">17</span> <span class=\"token operator\">|</span> <span class=\"token number\">2</span>b2e1b4 <span class=\"token operator\">|</span> <span class=\"token number\">9</span>df3407 <span class=\"token operator\">|</span> <span class=\"token number\">20</span>:<span class=\"token number\">00</span>:<span class=\"token number\">01</span> <span class=\"token operator\">|</span>\n<span class=\"token operator\">|</span> <span class=\"token number\">207430</span> <span class=\"token operator\">|</span> <span class=\"token number\">2022</span><span class=\"token operator\">-</span><span class=\"token number\">04</span><span class=\"token operator\">-</span><span class=\"token number\">28</span>   <span class=\"token operator\">|</span>            <span class=\"token number\">2</span> <span class=\"token operator\">|</span> <span class=\"token number\">2022</span><span class=\"token operator\">-</span><span class=\"token number\">05</span><span class=\"token operator\">-</span><span class=\"token number\">16</span> <span class=\"token number\">21</span>:<span class=\"token number\">13</span>:<span class=\"token number\">47</span> <span class=\"token operator\">|</span> <span class=\"token number\">2</span>b31924 <span class=\"token operator\">|</span> <span class=\"token number\">256</span>b363 <span class=\"token operator\">|</span> <span class=\"token number\">20</span>:<span class=\"token number\">00</span>:<span class=\"token number\">50</span> <span class=\"token operator\">|</span>\n<span class=\"token operator\">|</span> <span class=\"token number\">412796</span> <span class=\"token operator\">|</span> <span class=\"token number\">2022</span><span class=\"token operator\">-</span><span class=\"token number\">04</span><span class=\"token operator\">-</span><span class=\"token number\">10</span>   <span class=\"token operator\">|</span>            <span class=\"token number\">8</span> <span class=\"token operator\">|</span> <span class=\"token number\">2022</span><span class=\"token operator\">-</span><span class=\"token number\">05</span><span class=\"token operator\">-</span><span class=\"token number\">16</span> <span class=\"token number\">21</span>:<span class=\"token number\">16</span>:<span class=\"token number\">51</span> <span class=\"token operator\">|</span> <span class=\"token number\">2</span>b6c98c <span class=\"token operator\">|</span> af6dd3a <span class=\"token operator\">|</span> <span class=\"token number\">20</span>:<span class=\"token number\">00</span>:<span class=\"token number\">43</span> <span class=\"token operator\">|</span>\n<span class=\"token operator\">|</span> <span class=\"token number\">492708</span> <span class=\"token operator\">|</span> <span class=\"token number\">2022</span><span class=\"token operator\">-</span><span class=\"token number\">04</span><span class=\"token operator\">-</span><span class=\"token number\">07</span>   <span class=\"token operator\">|</span>            <span class=\"token number\">2</span> <span class=\"token operator\">|</span> <span class=\"token number\">2022</span><span class=\"token operator\">-</span><span class=\"token number\">05</span><span class=\"token operator\">-</span><span class=\"token number\">16</span> <span class=\"token number\">21</span>:<span class=\"token number\">18</span>:<span class=\"token number\">02</span> <span class=\"token operator\">|</span> <span class=\"token number\">2</span>b14a6b <span class=\"token operator\">|</span> <span class=\"token number\">274</span>ab3d <span class=\"token operator\">|</span> <span class=\"token number\">20</span>:<span class=\"token number\">00</span>:<span class=\"token number\">03</span> <span class=\"token operator\">|</span>\n<span class=\"token operator\">|</span> <span class=\"token number\">610563</span> <span class=\"token operator\">|</span> <span class=\"token number\">2022</span><span class=\"token operator\">-</span><span class=\"token number\">04</span><span class=\"token operator\">-</span><span class=\"token number\">04</span>   <span class=\"token operator\">|</span>            <span class=\"token number\">7</span> <span class=\"token operator\">|</span> <span class=\"token number\">2022</span><span class=\"token operator\">-</span><span class=\"token number\">05</span><span class=\"token operator\">-</span><span class=\"token number\">16</span> <span class=\"token number\">21</span>:<span class=\"token number\">19</span>:<span class=\"token number\">46</span> <span class=\"token operator\">|</span> <span class=\"token number\">2</span>b6ccba <span class=\"token operator\">|</span> <span class=\"token number\">53</span>e06ac <span class=\"token operator\">|</span> <span class=\"token number\">20</span>:<span class=\"token number\">00</span>:<span class=\"token number\">32</span> <span class=\"token operator\">|</span>\n<span class=\"token operator\">|</span> <span class=\"token number\">646019</span> <span class=\"token operator\">|</span> <span class=\"token number\">2022</span><span class=\"token operator\">-</span><span class=\"token number\">04</span><span class=\"token operator\">-</span><span class=\"token number\">09</span>   <span class=\"token operator\">|</span>            <span class=\"token number\">3</span> <span class=\"token operator\">|</span> <span class=\"token number\">2022</span><span class=\"token operator\">-</span><span class=\"token number\">05</span><span class=\"token operator\">-</span><span class=\"token number\">16</span> <span class=\"token number\">21</span>:<span class=\"token number\">20</span>:<span class=\"token number\">19</span> <span class=\"token operator\">|</span> <span class=\"token number\">2</span>b43c53 <span class=\"token operator\">|</span> <span class=\"token number\">0</span>d3dd41 <span class=\"token operator\">|</span> <span class=\"token number\">20</span>:<span class=\"token number\">00</span>:<span class=\"token number\">59</span> <span class=\"token operator\">|</span>\n<span class=\"token operator\">|</span> <span class=\"token number\">702301</span> <span class=\"token operator\">|</span> <span class=\"token number\">2022</span><span class=\"token operator\">-</span><span class=\"token number\">04</span><span class=\"token operator\">-</span><span class=\"token number\">21</span>   <span class=\"token operator\">|</span>            <span class=\"token number\">6</span> <span class=\"token operator\">|</span> <span class=\"token number\">2022</span><span class=\"token operator\">-</span><span class=\"token number\">05</span><span class=\"token operator\">-</span><span class=\"token number\">16</span> <span class=\"token number\">21</span>:<span class=\"token number\">21</span>:<span class=\"token number\">15</span> <span class=\"token operator\">|</span> <span class=\"token number\">2</span>b57afe <span class=\"token operator\">|</span> <span class=\"token number\">8549</span>b1b <span class=\"token operator\">|</span> <span class=\"token number\">20</span>:<span class=\"token number\">00</span>:<span class=\"token number\">25</span> <span class=\"token operator\">|</span>\n<span class=\"token operator\">|</span> <span class=\"token number\">798381</span> <span class=\"token operator\">|</span> <span class=\"token number\">2022</span><span class=\"token operator\">-</span><span class=\"token number\">04</span><span class=\"token operator\">-</span><span class=\"token number\">23</span>   <span class=\"token operator\">|</span>            <span class=\"token number\">8</span> <span class=\"token operator\">|</span> <span class=\"token number\">2022</span><span class=\"token operator\">-</span><span class=\"token number\">05</span><span class=\"token operator\">-</span><span class=\"token number\">16</span> <span class=\"token number\">21</span>:<span class=\"token number\">22</span>:<span class=\"token number\">43</span> <span class=\"token operator\">|</span> <span class=\"token number\">2</span>b4bf39 <span class=\"token operator\">|</span> cde432b <span class=\"token operator\">|</span> <span class=\"token number\">20</span>:<span class=\"token number\">00</span>:<span class=\"token number\">15</span> <span class=\"token operator\">|</span>\n<span class=\"token operator\">|</span> <span class=\"token number\">839637</span> <span class=\"token operator\">|</span> <span class=\"token number\">2022</span><span class=\"token operator\">-</span><span class=\"token number\">04</span><span class=\"token operator\">-</span><span class=\"token number\">24</span>   <span class=\"token operator\">|</span>            <span class=\"token number\">4</span> <span class=\"token operator\">|</span> <span class=\"token number\">2022</span><span class=\"token operator\">-</span><span class=\"token number\">05</span><span class=\"token operator\">-</span><span class=\"token number\">16</span> <span class=\"token number\">21</span>:<span class=\"token number\">23</span>:<span class=\"token number\">20</span> <span class=\"token operator\">|</span> <span class=\"token number\">2</span>b8adfc <span class=\"token operator\">|</span> <span class=\"token number\">366</span>a865 <span class=\"token operator\">|</span> <span class=\"token number\">20</span>:<span class=\"token number\">00</span>:<span class=\"token number\">24</span> <span class=\"token operator\">|</span>\n<span class=\"token operator\">|</span> <span class=\"token number\">999538</span> <span class=\"token operator\">|</span> <span class=\"token number\">2022</span><span class=\"token operator\">-</span><span class=\"token number\">04</span><span class=\"token operator\">-</span><span class=\"token number\">24</span>   <span class=\"token operator\">|</span>            <span class=\"token number\">7</span> <span class=\"token operator\">|</span> <span class=\"token number\">2022</span><span class=\"token operator\">-</span><span class=\"token number\">05</span><span class=\"token operator\">-</span><span class=\"token number\">16</span> <span class=\"token number\">21</span>:<span class=\"token number\">25</span>:<span class=\"token number\">42</span> <span class=\"token operator\">|</span> <span class=\"token number\">2</span>bf2434 <span class=\"token operator\">|</span> f91cefd <span class=\"token operator\">|</span> <span class=\"token number\">20</span>:<span class=\"token number\">00</span>:<span class=\"token number\">27</span> <span class=\"token operator\">|</span>\n<span class=\"token operator\">+</span><span class=\"token comment\">--------+--------------+--------------+---------------------+---------+---------+----------+</span>\n<span class=\"token number\">11</span> <span class=\"token keyword\">rows</span> <span class=\"token operator\">in</span> <span class=\"token keyword\">set</span> <span class=\"token punctuation\">(</span><span class=\"token number\">0.45</span> sec<span class=\"token punctuation\">)</span></code></pre></div>\n<p><strong>중복도가 높은 쪽에 인덱싱을 적용하니 인덱싱을 사용하지 않는 쿼리와같이 0.45초가 소요된다</strong>\n이렇게되면 인덱싱을 적용한 것이 의미가 없어진다.\n데이터를 100만개가 아니라 1000만개 생성했다면 차이가 더 극명했을 것 같다. 다음 포스트에서는 B+ Tree에 대해 알아보도록 하겠다.</p>","fields":{"slug":"/posts/2022//sql/database-indexing","tagSlugs":["/tag/database/"]},"frontmatter":{"date":"2022-05-16T23:34:37.121Z","description":"인덱싱을 적용한 데이터베이스의 효율을 알아본다","tags":["Database"],"title":"Database Indexing","socialImage":null}}},"pageContext":{"slug":"/posts/2022//sql/database-indexing"}},"staticQueryHashes":["251939775","288581551","401334301"]}